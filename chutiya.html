<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCM</title>
    <!-- Material Design Theming -->
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <link rel="manifest" href="/manifest.json">
</head>

<body>
    <div class>
        Push Demo
    </div>
    <script>
        var code = `importScripts('https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js');
            importScripts('https://www.gstatic.com/firebasejs/6.1.1/firebase-messaging.js');
            var firebaseConfig = {
              apiKey: "AIzaSyDwQ1l_xlv152z3zsXoCEqVrdy32ZkGtOQ",
              authDomain: "pushservice-de9e2.firebaseapp.com",
              databaseURL: "https://pushservice-de9e2.firebaseio.com",
              projectId: "pushservice-de9e2",
              storageBucket: "pushservice-de9e2.appspot.com",
              messagingSenderId: "53707849923",
              appId: "1:53707849923:web:fd85f9eb2ea64d1c"
            };
            firebase.initializeApp(firebaseConfig);
            var messaging = firebase.messaging();
            
            messaging.setBackgroundMessageHandler(function (payload) {
              console.log('[firebase-messaging-sw.js] Received background message ', payload);
              // Customize notification here
              var notificationTitle = 'Background Message Title';
              var notificationOptions = {
                body: 'Background Message body.',
                icon: '/firebase-logo.png'
              };
            
              return self.registration.showNotification(notificationTitle,
                notificationOptions);
            });`;
        var blob = new Blob([code], { type: "application/javascript" });
        navigator.serviceWorker.register(window.URL.createObjectURL(blob))
            .then((registration) => {
                console.log(registration);
                messaging.useServiceWorker(registration);
            });
    </script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-messaging.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/utkarshv/push_test/push.js"></script>

</body>

</html>